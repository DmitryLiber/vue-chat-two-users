import{d as B,r as v,a as b,u as M,w,b as c,o as u,c as p,e,f as o,g as i,h as g,t as m,F as T,i as k,j as f,k as D,n as F,l as N,_ as V,m as E}from"./index-oKQRWjEK.js";const G=[{id:1,name:"John"},{id:2,name:"Mike"}],I=B("messages",()=>{const r=v([]);function d(n,_){r.value.push({idUser:n,text:_,time:Date.now()})}return{messages:r,addMessage:d}}),L={class:"chat-box"},P={class:"chat-box__header"},j={class:"chat-box__main"},q={class:"chat-box__messages"},z={class:"chat-box__message-header"},A={class:"chat-box__message-user"},H={class:"chat-box__message-main"},J={class:"chat-box__message-footer"},$={class:"chat-box__message-date"},K={class:"chat-box__footer"},O=b({__name:"ChatBox",props:{idUser:{}},setup(r){const{idUser:d}=r,n=I(),_=M(),l=t=>G.find(h=>h.id===t),s=v(""),y=()=>{if(!s.value){_.showMsg({text:"Сообщение не может быть пустым",status:"error"});return}n.addMessage(d,s.value),s.value=""};return w(n.messages,()=>{N(()=>{document.querySelectorAll(".chat-box__main").forEach(t=>{t.scrollTop=t.scrollHeight})})}),(t,h)=>{const C=c("Typography"),S=c("Field"),U=c("Btn");return u(),p("div",L,[e("div",P,[o(C,{tag:"h2",mods:"heading3"},{default:i(()=>[g(m(l(t.idUser).name),1)]),_:1})]),e("div",j,[e("ul",q,[(u(!0),p(T,null,k(f(n).messages,a=>(u(),p("li",{class:F(["chat-box__message",{"chat-box__message--alt":a.idUser!==t.idUser}])},[e("div",z,[e("span",A,m(l(a.idUser).name),1)]),e("div",H,m(a.text),1),e("div",J,[e("span",$,m(a.time?new Date(a.time).toLocaleString():""),1)])],2))),256))])]),e("div",K,[e("form",{class:"chat-box__form",onSubmit:D(y,["prevent"])},[o(S,{placeholder:"Ваше сообщение",value:s.value,onInput:h[0]||(h[0]=a=>s.value=a.target.value)},null,8,["value"]),o(U,{mods:"small",type:"submit"},{default:i(()=>[g("Отправить")]),_:1})],32)])])}}}),x=V(O,[["__scopeId","data-v-040989f7"]]),R=b({__name:"ChatPage",setup(r){return(d,n)=>{const _=c("Typography"),l=c("Grid"),s=c("Container");return u(),E(s,null,{default:i(()=>[o(_,{tag:"h1",mods:"heading1",class:"pb-s"},{default:i(()=>[g("Чат двух пользователей")]),_:1}),o(l,{columns:"2"},{default:i(()=>[o(f(x),{idUser:1}),o(f(x),{idUser:2})]),_:1})]),_:1})}}});export{R as ChatPage};
